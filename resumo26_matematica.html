<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia de Fun√ß√µes Trigonom√©tricas para Vestibulares</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F0F8FF; /* Brilliant Blues - Lightest */
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        #problemStatement p, #problemSolution p {
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="bg-[#F0F8FF]">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#00449E] mb-2">Dominando as Fun√ß√µes Trigonom√©tricas</h1>
            <p class="text-lg text-[#005BC0]">Seu guia completo para USP, Unicamp, Enem e PUC-Rio.</p>
        </header>

        <main>
            
            <section class="mb-12">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-[#00449E] mb-4">A Base: Seno e Cosseno</h2>
                    <p class="text-gray-600 mb-6">As fun√ß√µes seno e cosseno s√£o a base de todos os fen√¥menos peri√≥dicos. Elas descrevem um padr√£o de onda que se repete. O gr√°fico fundamental de y = sen(x) come√ßa em 0, sobe at√© 1, desce at√© -1 e volta a 0 em 2œÄ. J√° y = cos(x) come√ßa em 1, desce at√© -1 e volta a 1 em 2œÄ. Observe como s√£o semelhantes, apenas "deslocadas" uma da outra.</p>
                    <div class="chart-container max-w-3xl mx-auto">
                        <canvas id="baseFunctionsChart"></canvas>
                    </div>
                </div>
            </section>

            <section class="mb-12">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-[#00449E] mb-4">Decifrando a Fun√ß√£o Completa</h2>
                    <p class="text-gray-600 mb-6">A maioria dos problemas de vestibular usa uma forma geral da fun√ß√£o trigonom√©trica. Entender o que cada par√¢metro faz √© a chave para resolver as quest√µes.</p>
                    <div class="bg-[#E6F3FF] p-4 rounded-lg text-center mb-6">
                        <code class="text-xl md:text-2xl font-bold text-[#005BC0]">f(x) = A + B ‚ãÖ sen(C ‚ãÖ x + D)</code>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-bold text-lg text-[#0072E8] flex items-center">A: Deslocamento Vertical <button onclick="getSimpleExplanation('A')" class="ml-2 text-lg text-[#0072E8] hover:text-[#00449E] transition-transform duration-200 hover:scale-125 focus:outline-none">‚ú®</button></h3>
                            <p class="text-gray-600">Move o gr√°fico para cima (A > 0) ou para baixo (A < 0). √â a "nova linha m√©dia" da onda.</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-bold text-lg text-[#0072E8] flex items-center">B: Amplitude <button onclick="getSimpleExplanation('B')" class="ml-2 text-lg text-[#0072E8] hover:text-[#00449E] transition-transform duration-200 hover:scale-125 focus:outline-none">‚ú®</button></h3>
                            <p class="text-gray-600">Determina a "altura" da onda. A fun√ß√£o ir√° variar de A-|B| at√© A+|B|. A amplitude √© sempre |B|.</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-bold text-lg text-[#0072E8] flex items-center">C: Per√≠odo <button onclick="getSimpleExplanation('C')" class="ml-2 text-lg text-[#0072E8] hover:text-[#00449E] transition-transform duration-200 hover:scale-125 focus:outline-none">‚ú®</button></h3>
                            <p class="text-gray-600">Altera a frequ√™ncia da onda. O per√≠odo (P), que √© a dist√¢ncia para a onda se repetir, √© calculado por <code class="font-bold">P = 2œÄ / |C|</code>.</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-bold text-lg text-[#0072E8] flex items-center">D: Deslocamento Horizontal <button onclick="getSimpleExplanation('D')" class="ml-2 text-lg text-[#0072E8] hover:text-[#00449E] transition-transform duration-200 hover:scale-125 focus:outline-none">‚ú®</button></h3>
                            <p class="text-gray-600">Move o gr√°fico para a esquerda ou direita. Tamb√©m chamado de "defasagem".</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-12">
                <h2 class="text-3xl font-bold text-[#00449E] text-center mb-8">Visualizando as Transforma√ß√µes Gr√°ficas</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Mudando a Amplitude (B)</h3>
                        <p class="text-gray-600 mb-4">Aumentar |B| "estica" o gr√°fico verticalmente. Comparando <code class="font-mono">sen(x)</code> com <code class="font-mono">2‚ãÖsen(x)</code>.</p>
                        <div class="chart-container">
                            <canvas id="amplitudeChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Mudando o Per√≠odo (C)</h3>
                        <p class="text-gray-600 mb-4">Aumentar |C| "comprime" o gr√°fico, fazendo a onda se repetir mais r√°pido. Comparando <code class="font-mono">sen(x)</code> com <code class="font-mono">sen(2x)</code>.</p>
                        <div class="chart-container">
                            <canvas id="periodChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Deslocamento Vertical (A)</h3>
                        <p class="text-gray-600 mb-4">Somar uma constante 'A' move todo o gr√°fico para cima. Comparando <code class="font-mono">sen(x)</code> com <code class="font-mono">sen(x) + 1</code>.</p>
                        <div class="chart-container">
                            <canvas id="verticalShiftChart"></canvas>
                        </div>
                    </div>
                     <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Deslocamento Horizontal (D)</h3>
                        <p class="text-gray-600 mb-4">Ajustar 'D' move o gr√°fico para os lados. Comparando <code class="font-mono">cos(x)</code> com <code class="font-mono">cos(x - œÄ/2)</code>, que se torna <code class="font-mono">sen(x)</code>.</p>
                        <div class="chart-container">
                            <canvas id="horizontalShiftChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="mb-12">
                <h2 class="text-3xl font-bold text-[#00449E] text-center mb-8">Aplica√ß√µes em Fen√¥menos Peri√≥dicos</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                        <div class="text-3xl text-[#0072E8] mb-3">üåä</div>
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Altura das Mar√©s</h3>
                        <p class="text-gray-600 flex-grow">A altura da √°gua em um porto varia de forma senoidal ao longo do dia, com per√≠odos de aproximadamente 12 horas. Quest√µes podem pedir a altura m√°xima, m√≠nima ou em um hor√°rio espec√≠fico.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                         <div class="text-3xl text-[#0072E8] mb-3">üå°Ô∏è</div>
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Varia√ß√£o de Temperatura</h3>
                        <p class="text-gray-600 flex-grow">A temperatura m√©dia ao longo de um ano em uma cidade pode ser modelada por uma fun√ß√£o cosseno, sendo m√°xima no ver√£o e m√≠nima no inverno. O per√≠odo aqui seria de 12 meses.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                         <div class="text-3xl text-[#0072E8] mb-3">üö≤</div>
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Movimento de uma Roda</h3>
                        <p class="text-gray-600 flex-grow">A altura de um ponto (um chiclete preso) na borda de uma roda de bicicleta em movimento descreve uma senoide em rela√ß√£o ao tempo. A amplitude √© o raio da roda.</p>
                    </div>
                     <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                         <div class="text-3xl text-[#0072E8] mb-3">üîä</div>
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Ondas Sonoras e Ru√≠do</h3>
                        <p class="text-gray-600 flex-grow">O som √© uma onda. Fones com cancelamento de ru√≠do geram uma onda sonora invertida (<code class="font-mono">-sen(x)</code>) para anular o barulho externo, que √© outra onda (<code class="font-mono">sen(x)</code>).</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                        <div class="text-3xl text-[#0072E8] mb-3">‚öôÔ∏è</div>
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Movimento de Mola (MHS)</h3>
                        <p class="text-gray-600 flex-grow">A posi√ß√£o de um objeto preso a uma mola oscilando (Movimento Harm√¥nico Simples) √© perfeitamente descrita por uma fun√ß√£o seno ou cosseno em rela√ß√£o ao tempo.</p>
                    </div>
                     <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                        <div class="text-3xl text-[#0072E8] mb-3">üìª</div>
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">Ondas de R√°dio</h3>
                        <p class="text-gray-600 flex-grow">A transmiss√£o de r√°dio AM/FM modula uma onda portadora (senoidal) alterando sua amplitude (AM) ou sua frequ√™ncia (FM) para carregar a informa√ß√£o sonora.</p>
                    </div>
                </div>
            </section>

            <section class="mb-12">
                <h2 class="text-3xl font-bold text-[#00449E] text-center mb-8">Como Cai em Cada Vestibular</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">ENEM</h3>
                        <p class="text-gray-600"><strong>Foco:</strong> Interpreta√ß√£o e aplica√ß√£o. As quest√µes do Enem geralmente apresentam um gr√°fico de uma situa√ß√£o real (temperatura, mar√©, produ√ß√£o de energia) e pedem para voc√™ identificar o per√≠odo, a amplitude ou o valor m√°ximo/m√≠nimo. A habilidade mais importante √© ler o gr√°fico e conectar os par√¢metros da fun√ß√£o com o contexto do problema, sem a necessidade de c√°lculos complexos.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">USP (FUVEST) & Unicamp</h3>
                         <p class="text-gray-600"><strong>Foco:</strong> An√°lise e √°lgebra. Espere quest√µes mais abstratas e que exigem maior manipula√ß√£o alg√©brica. Podem pedir para voc√™ determinar a lei de forma√ß√£o da fun√ß√£o a partir de um gr√°fico ou de informa√ß√µes textuais, resolver equa√ß√µes trigonom√©tricas dentro de um intervalo espec√≠fico ou analisar transforma√ß√µes mais complexas no gr√°fico.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2">
                        <h3 class="text-xl font-bold text-[#005BC0] mb-2">PUC-Rio</h3>
                         <p class="text-gray-600"><strong>Foco:</strong> Equil√≠brio entre teoria e pr√°tica. A PUC-Rio costuma ter um estilo intermedi√°rio. As quest√µes podem ser contextualizadas como no Enem, mas frequentemente exigem um passo a mais no c√°lculo, como encontrar o valor da fun√ß√£o em um ponto que n√£o est√° evidente no gr√°fico ou resolver uma equa√ß√£o simples para achar um instante de tempo.</p>
                    </div>
                </div>
            </section>
            
            <section class="mb-12">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-[#00449E] mb-4 text-center">Gerador de Problemas Pr√°ticos ‚ú®</h2>
                    <p class="text-gray-600 mb-6 text-center">Precisa de mais exerc√≠cios? Clique no bot√£o abaixo para que a IA crie um problema novo para voc√™, no estilo dos vestibulares.</p>
                    <div class="text-center">
                        <button id="generateProblemBtn" onclick="generateProblem()" class="bg-[#0072E8] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#005BC0] transition-colors duration-300 shadow-md">
                            Gerar Novo Problema
                        </button>
                    </div>
                    <div id="problemContainer" class="mt-8" style="display: none;">
                        <div id="loadingSpinner" class="text-center p-6 bg-gray-50 rounded-lg">
                            <svg class="animate-spin h-8 w-8 text-[#0072E8] mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="mt-2 text-gray-600">Criando um desafio para voc√™...</p>
                        </div>
                        <div id="problemContent" class="p-6 bg-gray-50 rounded-lg" style="display: none;">
                            <div id="problemStatement" class="text-gray-800 leading-relaxed"></div>
                            <div class="text-center mt-6">
                                <button id="solutionBtn" onclick="toggleSolution()" class="text-[#0072E8] font-semibold hover:underline">Mostrar Solu√ß√£o</button>
                            </div>
                            <div id="problemSolution" class="mt-4 pt-4 border-t border-gray-200 text-gray-700 leading-relaxed" style="display: none;"></div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-lg w-full relative">
            <button onclick="hideModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            <div id="modalLoading" class="text-center">
                 <svg class="animate-spin h-6 w-6 text-[#0072E8] mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="mt-2 text-gray-600">Buscando uma explica√ß√£o simples...</p>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const defaultTooltipOptions = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            } else {
                              return label;
                            }
                        }
                    }
                }
            }
        };

        const defaultChartOptions = {
            maintainAspectRatio: false,
            responsive: true,
            scales: {
                x: { 
                    type: 'linear', 
                    title: { display: true, text: 'x (radianos)'},
                    ticks: {
                        callback: function(value, index, values) {
                            const pi = Math.PI;
                            if (value === 0) return '0';
                            if (Math.abs(value - pi/2) < 0.01) return 'œÄ/2';
                            if (Math.abs(value - pi) < 0.01) return 'œÄ';
                            if (Math.abs(value - 3*pi/2) < 0.01) return '3œÄ/2';
                            if (Math.abs(value - 2*pi) < 0.01) return '2œÄ';
                             if (Math.abs(value + pi/2) < 0.01) return '-œÄ/2';
                            if (Math.abs(value + pi) < 0.01) return '-œÄ';
                            return null;
                        }
                    }
                },
                y: { beginAtZero: false, title: { display: true, text: 'f(x)'} }
            },
            ...defaultTooltipOptions
        };

        function generateData(func, start, end, step) {
            const data = [];
            const labels = [];
            for (let x = start; x <= end; x += step) {
                labels.push(x);
                data.push(func(x));
            }
            return { labels, data };
        }

        const xRange = { start: 0, end: 2 * Math.PI, step: 0.1 };
        const senData = generateData(Math.sin, xRange.start, xRange.end, xRange.step);
        const cosData = generateData(Math.cos, xRange.start, xRange.end, xRange.step);

        new Chart(document.getElementById('baseFunctionsChart'), {
            type: 'line',
            data: { labels: senData.labels, datasets: [{ label: 'y = sen(x)', data: senData.data, borderColor: '#0072E8', tension: 0.1, fill: false }, { label: 'y = cos(x)', data: cosData.data, borderColor: '#86C1FF', tension: 0.1, fill: false }] },
            options: defaultChartOptions
        });
        const ampData = generateData(x => 2 * Math.sin(x), xRange.start, xRange.end, xRange.step);
        new Chart(document.getElementById('amplitudeChart'), {
            type: 'line',
            data: { labels: senData.labels, datasets: [{ label: 'y = sen(x)', data: senData.data, borderColor: '#86C1FF', borderDash: [5, 5], tension: 0.1, fill: false }, { label: 'y = 2sen(x)', data: ampData.data, borderColor: '#0072E8', tension: 0.1, fill: false }] },
            options: defaultChartOptions
        });
        const periodData = generateData(x => Math.sin(2*x), xRange.start, xRange.end, xRange.step);
        new Chart(document.getElementById('periodChart'), {
            type: 'line',
            data: { labels: senData.labels, datasets: [{ label: 'y = sen(x)', data: senData.data, borderColor: '#86C1FF', borderDash: [5, 5], tension: 0.1, fill: false }, { label: 'y = sen(2x)', data: periodData.data, borderColor: '#0072E8', tension: 0.1, fill: false }] },
            options: defaultChartOptions
        });
        const verticalShiftData = generateData(x => Math.sin(x) + 1, xRange.start, xRange.end, xRange.step);
        new Chart(document.getElementById('verticalShiftChart'), {
            type: 'line',
            data: { labels: senData.labels, datasets: [{ label: 'y = sen(x)', data: senData.data, borderColor: '#86C1FF', borderDash: [5, 5], tension: 0.1, fill: false }, { label: 'y = sen(x) + 1', data: verticalShiftData.data, borderColor: '#0072E8', tension: 0.1, fill: false }] },
            options: defaultChartOptions
        });
        const horizontalShiftData = generateData(x => Math.cos(x - Math.PI / 2), xRange.start, xRange.end, xRange.step);
        new Chart(document.getElementById('horizontalShiftChart'), {
            type: 'line',
            data: { labels: cosData.labels, datasets: [{ label: 'y = cos(x)', data: cosData.data, borderColor: '#86C1FF', borderDash: [5, 5], tension: 0.1, fill: false }, { label: 'y = cos(x - œÄ/2)', data: horizontalShiftData.data, borderColor: '#0072E8', tension: 0.1, fill: false }] },
            options: defaultChartOptions
        });

        const apiKey = ""; 
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        async function callGeminiAPI(prompt, retries = 3, delay = 1000) {
            const payload = { contents: [{ parts: [{ text: prompt }] }] };
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates && result.candidates[0].content.parts[0].text) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        throw new Error("Resposta inv√°lida da API.");
                    }
                } catch (error) {
                    if (i === retries - 1) {
                        console.error("Erro ao chamar a API Gemini:", error);
                        return "Desculpe, n√£o foi poss√≠vel obter uma resposta da IA no momento. Tente novamente mais tarde.";
                    }
                    await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                }
            }
        }

        window.generateProblem = async function() {
            const problemContainer = document.getElementById('problemContainer');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const problemContent = document.getElementById('problemContent');
            const problemStatement = document.getElementById('problemStatement');
            const problemSolution = document.getElementById('problemSolution');
            const solutionBtn = document.getElementById('solutionBtn');
            const generateBtn = document.getElementById('generateProblemBtn');

            problemContainer.style.display = 'block';
            loadingSpinner.style.display = 'block';
            problemContent.style.display = 'none';
            problemSolution.style.display = 'none';
            solutionBtn.textContent = 'Mostrar Solu√ß√£o';
            generateBtn.disabled = true;
            generateBtn.classList.add('opacity-50', 'cursor-not-allowed');

            const topics = ["Altura das Mar√©s", "Varia√ß√£o de Temperatura", "Movimento de uma Roda de Bicicleta", "Movimento de Mola (MHS)", "Ondas Sonoras"];
            const randomTopic = topics[Math.floor(Math.random() * topics.length)];

            const prompt = `Aja como um professor de matem√°tica especialista em vestibulares brasileiros. Crie um problema pr√°tico e original, em portugu√™s, envolvendo fun√ß√µes trigonom√©tricas (seno ou cosseno) aplicado ao tema "${randomTopic}". O problema deve ser desafiador, mas sol√∫vel por um aluno de ensino m√©dio.\nFormato da resposta:\n1. Forne√ßa apenas o enunciado completo do problema.\n2. Em uma nova linha, coloque exatamente este separador: ---\n3. Ap√≥s o separador, forne√ßa a resolu√ß√£o completa e passo-a-passo do problema.\nN√£o inclua a resposta final no enunciado.`;

            const responseText = await callGeminiAPI(prompt);

            loadingSpinner.style.display = 'none';
            problemContent.style.display = 'block';
            generateBtn.disabled = false;
            generateBtn.classList.remove('opacity-50', 'cursor-not-allowed');

            if (responseText.includes('---')) {
                const parts = responseText.split('---');
                problemStatement.innerHTML = parts[0].trim().replace(/\n/g, '<br>');
                problemSolution.innerHTML = parts[1].trim().replace(/\n/g, '<br>');
            } else {
                problemStatement.innerHTML = "Houve um erro ao gerar o problema. Tente novamente.";
                problemSolution.innerHTML = "";
            }
        };

        window.toggleSolution = function() {
            const solutionDiv = document.getElementById('problemSolution');
            const solutionBtn = document.getElementById('solutionBtn');
            const isVisible = solutionDiv.style.display === 'block';
            solutionDiv.style.display = isVisible ? 'none' : 'block';
            solutionBtn.textContent = isVisible ? 'Mostrar Solu√ß√£o' : 'Ocultar Solu√ß√£o';
        };

        window.getSimpleExplanation = async function(concept) {
            const modal = document.getElementById('explanationModal');
            const modalContent = document.getElementById('modalContent');
            const modalLoading = document.getElementById('modalLoading');

            modal.classList.remove('hidden');
            modalContent.innerHTML = '';
            modalLoading.style.display = 'block';
            
            let conceptName = '';
            switch(concept) {
                case 'A': conceptName = "Deslocamento Vertical (par√¢metro A)"; break;
                case 'B': conceptName = "Amplitude (par√¢metro B)"; break;
                case 'C': conceptName = "Per√≠odo (par√¢metro C)"; break;
                case 'D': conceptName = "Deslocamento Horizontal (par√¢metro D)"; break;
            }

            const prompt = `Em portugu√™s, explique o conceito de "${conceptName}" em uma fun√ß√£o trigonom√©trica como se estivesse explicando para um estudante do ensino m√©dio com dificuldade em matem√°tica. Use uma analogia ou exemplo pr√°tico e simples. Mantenha a explica√ß√£o curta em um √∫nico par√°grafo conciso.`;
            
            const explanation = await callGeminiAPI(prompt);

            modalContent.innerHTML = `<h3 class="text-xl font-bold text-[#005BC0] mb-2">${conceptName}</h3><p class="text-gray-700 leading-relaxed">${explanation}</p>`;
            modalLoading.style.display = 'none';
        };

        window.hideModal = function() {
            document.getElementById('explanationModal').classList.add('hidden');
        };

    });
    </script>
</body>
            <footer class="text-center mt-12 pt-8 border-t border-gray-200">
    <a href="index.html" class="text-[#005BC0] hover:underline font-semibold mx-4">
        ‚Üê Voltar para a lista de Matem√°tica
    </a>
    <a href="../index.html" class="text-[#005BC0] hover:underline font-semibold mx-4">
        üè† Voltar para o Menu Principal
    </a>
</footer>
</html>
